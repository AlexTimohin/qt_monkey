#
# Available repositories are listed here:
# https://github.com/travis-ci/apt-source-whitelist/blob/master/ubuntu.json
#

sudo: false

language:
  - cpp
  - python

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    - kalakris-cmake
    - ubuntu-sdk-team
    packages:
    - gcc-4.8
    - cmake
    - libqt5widgets5

env:
- COMPILER_VERSION=4.8

before_script:
  - mkdir build
  - cd build
  - CC=$CC-${COMPILER_VERSION} CXX=$CXX-${COMPILER_VERSION} cmake -DQT_VARIANT="qt5" -DUSE_TESTS=True ..
  - cd ..

script:
  - make -k -j2 VERBOSE=1 -C build
  - ctest --output-on-failure
